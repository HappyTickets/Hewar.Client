<p-toast></p-toast>

<div class="facility-form">
  <h2>{{ "app.facilities.add-facility" | translate }}</h2>

  <form
    [formGroup]="facilityForm"
    (ngSubmit)="onSubmit()"
    class="form-create-facility f"
  >
    <p class="p-group">{{ "app.facilities.facility-data" | translate }}</p>
    <div class="group n">
      <app-input
        placeholder="facilities.facility-name"
        [formGroup]="facilityForm"
        errorKey="invalidName"
        controlName="name"
        icon="pi-id-card"
        type="text"
        label="facilities.facility-name"
      ></app-input>

      <app-input
        placeholder="facilities.facility-type"
        [formGroup]="facilityForm"
        errorKey="facilities.facility-type"
        controlName="type"
        icon="pi-building"
        type="text"
        label="facilities.facility-type"
      ></app-input>

      <app-input
        placeholder="facilities.Commercial-Registration"
        [formGroup]="facilityForm"
        errorKey="facilities.Commercial-Registration"
        controlName="commercialRegistration"
        icon="pi-file"
        type="text"
        label="facilities.Commercial-Registration"
      ></app-input>

      <app-input
        placeholder="facilities.activity-type"
        [formGroup]="facilityForm"
        errorKey="facilities.activity-type"
        controlName="activityType"
        icon="pi-barcode"
        type="text"
        label="facilities.activity-type"
      ></app-input>
      <p class="p-group">
        {{ "app.facilities.facility-det-address" | translate }}
      </p>
      <div class="address" formGroupName="address">
        <div class="p-input">
          <app-input
            [formGroup]="addressFormGroup"
            placeholder="facilities.street"
            errorKey="facilities.street"
            controlName="street"
            icon="pi-map-marker"
            type="text"
            label="facilities.street"
          ></app-input>
        </div>
        <div class="p-input">
          <app-input
            placeholder="facilities.city"
            [formGroup]="addressFormGroup"
            errorKey="facilities.city"
            controlName="city"
            icon="pi-map"
            type="text"
            label="facilities.city"
          ></app-input>
        </div>
        <div class="p-input">
          <app-input
            placeholder="facilities.state"
            [formGroup]="addressFormGroup"
            errorKey="facilities.state"
            controlName="state"
            icon="pi-globe"
            type="text"
            label="facilities.state"
          ></app-input>
        </div>
        <div class="p-input">
          <app-input
            placeholder="facilities.country"
            [formGroup]="addressFormGroup"
            errorKey="facilities.country"
            controlName="country"
            icon="pi-flag"
            type="text"
            label="facilities.country"
          ></app-input>
        </div>
        <div class="p-input">
          <app-input
            placeholder="facilities.postalCode"
            [formGroup]="addressFormGroup"
            errorKey="facilities.postalCode"
            controlName="postalCode"
            icon="pi-flag"
            type="text"
            label="facilities.postalCode"
          ></app-input>
        </div>
      </div>
    </div>

    <p class="p-group">
      {{ "app.facilities.facility-Responsible" | translate }}
    </p>
    <div class="group">
      <div class="responsibleData">
        <div class="p-input">
          <app-input
            placeholder="facilities.responsipoleNam"
            [formGroup]="facilityForm"
            errorKey="facilities.responsipoleNam"
            controlName="responsibleName"
            icon="pi-user"
            type="text"
            label="facilities.responsipoleNam"
          ></app-input>
        </div>
        <div class="p-input">
          <app-input
            (keypress)="validateNumberInput($event)"
            placeholder="facilities.phone"
            [formGroup]="facilityForm"
            errorKey="facilities.phone"
            controlName="responsiblePhone"
            icon="pi-phone"
            type="text"
            label="facilities.phone"
          ></app-input>
        </div>
      </div>
    </div>

    <p class="p-group">
      {{ "app.facilities.facility-image" | translate }}
    </p>
    <div class="group">
      <div class="imag-uplod">
        <label for="">{{ "app.facilities.upload-image" | translate }}</label>
        <i class="pi pi-cloud-upload"></i>

        <app-image-uploader
          (fileSizeError)="handleFileSizeError($event)"
          (imageName)="handelImageName($event)"
        ></app-image-uploader>
        <div *ngIf="fileUploadError" class="error-message">
          {{ fileUploadError }}
        </div>
      </div>
    </div>
    <div class="buttons">
      <div class="form-buttons">
        <div>
          <button
            pButton
            type="submit"
            label="Create "
            class="p-button-success"
          ></button>
        </div>
        <div>
          <button
            pButton
            type="button"
            label="Cancel"
            class="p-button-secondary"
            (click)="cancel()"
          ></button>
        </div>
      </div>
    </div>
  </form>
</div>
